---
title: npm 常用命令和版本控制全解
date: 2017-06-27
categories: [工具, npm]
tags: [npm]
---

npm 常用命令和版本控制全解

<!--more-->

## 简介

npm 随同 NodeJS 一起安装的包管理工具，能解决 NodeJS 代码部署上的很多问题。

## 版本控制

npm 是围绕着语义版本控制（semver）的思想而设计的。

语义版本号分为 X.Y.Z 三位，分别代表**主版本号、次版本号和补丁版本号**。当代码变更时，版本号按以下原则更新。

- 如果只是修复 bug，需要更新 Z 位。
- 如果是新增了功能，但是向下兼容，需要更新 Y 位。
- 如果有大变动，向下不兼容，需要更新 X 位。

版本号有了这个保证后，在申明第三方包依赖时，除了可依赖于一个固定版本号外，还可依赖于某个范围的版本号。例如"argv": "0.0.x"表示依赖于 0.0.x 系列的最新版 argv。

package.json 中版本符号的意义

````json
{
  "pkg": "1.1.2", // 必须匹配某个版本

  "pkg": ">1.1.2", // 必须大于某个版本

  "pkg": ">=1.1.2", // 可大于或等于某个版本

  "pkg": "<1.1.2", // 表示必须小于1.1.2版本

  "pkg": "<=1.1.2", // 可以小于或等于某个版本

  "pkg": "~1.1.2", // 大概匹配某个版本：>= 1.1.2，< 1.2.0
  "pkg": "~1.1", // 大概匹配某个版本：>= 1.1.0，< 1.2.0
  "pkg": "~1", // 大概匹配某个版本：>= 1.0.0，< 2.0.0

  "pkg": "^1.1.x", // x 位可以任意版本
  
  "pkg": "*", // 任意 >= 0.0.0 版本

  "pkg": "1.2.0 - 1.3.0", // 版本范围匹配：>= 1.2.0，<= 1.3.0

  "pkg": "<1.0.0 || >=2.3.1" // 多个范围匹配
}
```

## 常用命令

安装

```shell
npm install
npm i // 简写

npm i -g // 全局安装
````

查看安装信息

```shell
npm list
npm list -g // 查看全局安装

npm list [package] // 查看某个包版本号
```

更新模块

```shell
npm update [package]
npm update [package] -g
```

清理

```shell
npm cache clear // 清空NPM本地缓存
```

## 参考网站

https://www.npmjs.com/

https://www.runoob.com/nodejs/nodejs-npm.html
